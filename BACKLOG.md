# –ë–µ–∫–ª–æ–≥

## P1 ‚Äî –í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

### –í—Å—Ç–∞–≤–∫–∞ –≤ –∞–∫—Ç–∏–≤–Ω–µ –≤—ñ–∫–Ω–æ
- –ü—ñ—Å–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—ó –≤—Å—Ç–∞–≤–∏—Ç–∏ —Ç–µ–∫—Å—Ç —É –ø–æ—Ç–æ—á–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É
- –°–∏–º—É–ª—è—Ü—ñ—è Ctrl+V –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è X11/Wayland API
- –ö–ª—é—á–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è seamless workflow

## P2 ‚Äî –°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

### –†–µ–∂–∏–º –∑–∞–ø–∏—Å—É –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ–π üöÄ
**–°—Ç–∞—Ç—É—Å:** Ready for implementation (ADR-003, ADR-004 completed)

**–ö–ª—é—á–æ–≤—ñ —Ä—ñ—à–µ–Ω–Ω—è:**
- Loopback: `pipewire` crate v0.9 (CPAL –Ω–µ –±–∞—á–∏—Ç—å monitor sources)
- Diarization: Channel-based (MVP) ‚Üí Sortformer (prod) ‚Üí pyannote-rs (5+ speakers)
- Streaming: Sortformer –ø—ñ–¥—Ç—Ä–∏–º—É—î real-time

**–§–∞–∑–∏:**
1. MVP: pipewire + channel-based `[–í–∏]`/`[–£—á–∞—Å–Ω–∏–∫]`
2. Production: + parakeet-rs/Sortformer (–¥–æ 4 –º–æ–≤—Ü—ñ–≤)
3. Polish: + recordings UI, export

**–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å:** [docs/backlog/conference-recording.md](docs/backlog/conference-recording.md)

### –ï–∫—Å–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó
- –ï–∫—Å–ø–æ—Ä—Ç —É —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ –¥–∞—Ç—ñ

### –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è–º
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç —É –≤—ñ–∫–Ω—ñ
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è

## P3 ‚Äî –ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

### –ù–µ–ø–µ—Ä–µ—Ä–≤–Ω–∏–π —Ä–µ–∂–∏–º
–ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∏–π –∑–∞–ø–∏—Å –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—î—é –¥–ª—è –¥–æ–≤–≥–∏—Ö —Å–µ—Å—ñ–π.

**–†–µ–∂–∏–º –¥–∏–∫—Ç–æ–≤–∫–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è –ø–æ –ø–∞—É–∑–∞—Ö (VAD-based)
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç—É –æ–∫—Ä–µ–º–æ
- –û–±'—î–¥–Ω–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –≤ –æ–¥–∏–Ω —Ç–µ–∫—Å—Ç
- –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å: "–î–µ—Ç–µ–∫—Ü—ñ—è —Ç–∏—à—ñ" (P4)

**–†–µ–∂–∏–º –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—ó:**
- Sortformer –≤–∂–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î streaming (~10s chunks)
- Whisper –æ–±—Ä–æ–±–ª—è—î —Å–µ–≥–º–µ–Ω—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ
- Real-time —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Å—É

**–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:**
- –ë—É—Ñ–µ—Ä: ring buffer –¥–ª—è –∞—É–¥—ñ–æ (~30s)
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è: VAD –∞–±–æ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏
- Whisper: batch processing —Å–µ–≥–º–µ–Ω—Ç—ñ–≤
- UI: –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—Ä–æ–º—ñ–∂–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∞—É–¥—ñ–æ
–í–∏–±—ñ—Ä –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —è–∫–æ—Å—Ç—ñ.

**–†–µ–∂–∏–º –¥–∏–∫—Ç–æ–≤–∫–∏ (CPAL):**
- –í–∏–±—ñ—Ä –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ –∑—ñ —Å–ø–∏—Å–∫—É `host.input_devices()`
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è sample rate (16kHz –¥–ª—è Whisper)
- Gain/volume control

**–†–µ–∂–∏–º –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—ó (CPAL + PipeWire):**
- –ú—ñ–∫—Ä–æ—Ñ–æ–Ω: –≤–∏–±—ñ—Ä —á–µ—Ä–µ–∑ CPAL (—è–∫ –≤–∏—â–µ)
- Loopback: –≤–∏–±—ñ—Ä monitor source —á–µ—Ä–µ–∑ PipeWire
  - Auto-detect default sink monitor
  - –ê–±–æ –≤–∏–±—ñ—Ä –≤—Ä—É—á–Ω—É (`pactl list sources`)
- –û–∫—Ä–µ–º–∏–π gain –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —è–∫–æ—Å—Ç—ñ:**
- Sample rate: 16000 (Whisper) / 44100 / 48000
- Channels: mono (dictation) / stereo (conference)
- Format: f32 / i16

**UI:**
- Dropdown –¥–ª—è –≤–∏–±–æ—Ä—É –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞
- Dropdown –¥–ª—è –≤–∏–±–æ—Ä—É loopback (–≤ —Ä–µ–∂–∏–º—ñ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—ó)
- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä—ñ–≤–Ω—è —Å–∏–≥–Ω–∞–ª—É (–≤–∂–µ —î `get_amplitude()`)
- Test recording button

## P4 ‚Äî –í—ñ–¥–∫–ª–∞–¥–µ–Ω–æ

### –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- Desktop notification –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—ó
- –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `notify-rust`

### –î–µ—Ç–µ–∫—Ü—ñ—è —Ç–∏—à—ñ (VAD)
Voice Activity Detection –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó —Å–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—ó.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑—É–ø–∏–Ω–∫–∞ –∑–∞–ø–∏—Å—É –ø—ñ—Å–ª—è –ø–∞—É–∑–∏ (dictation)
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –Ω–µ–ø–µ—Ä–µ—Ä–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É (P3)
- –ü—Ä–æ–ø—É—Å–∫ —Ç–∏—à—ñ –ø—Ä–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—ó (–µ–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤)

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- –ü–æ—Ä—ñ–≥ —Ç–∏—à—ñ (amplitude threshold)
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Ç–∏—à—ñ –¥–ª—è –∑—É–ø–∏–Ω–∫–∏ (1-5s)
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –º–æ–≤–∏ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç—É

**–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:**
```rust
// –ü—Ä–æ—Å—Ç–∏–π VAD –Ω–∞ –æ—Å–Ω–æ–≤—ñ RMS (–≤–∂–µ —î get_amplitude())
if amplitude < threshold && silence_duration > min_silence {
    // End of segment
}
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** `webrtc-vad = "0.4"` ‚Äî –±—ñ–ª—å—à —Ç–æ—á–Ω–∏–π ML-based VAD

**–ó–≤'—è–∑–æ–∫:** –ü–æ—Ç—Ä—ñ–±–µ–Ω –¥–ª—è "–ù–µ–ø–µ—Ä–µ—Ä–≤–Ω–∏–π —Ä–µ–∂–∏–º" (P3)

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ó–∞–≥–∞–ª—å–Ω–∏–π —á–∞—Å –¥–∏–∫—Ç–æ–≤–æ–∫
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤
- –ì—Ä–∞—Ñ—ñ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö –º–æ–≤ –≤ UI
- –ü–µ—Ä–µ–∫–ª–∞–¥ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É (EN/UK)
- Gettext –∞–±–æ fluent

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –ì–ª–æ–±–∞–ª—å–Ω—ñ –≥–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ
- ~~–ó–∞–ø—É—Å–∫/–∑—É–ø–∏–Ω–∫–∞ –∑–∞–ø–∏—Å—É –∑ –±—É–¥—å-—è–∫–æ—ó –ø—Ä–æ–≥—Ä–∞–º–∏~~
- ~~–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó –∫–ª–∞–≤—ñ—à —É –∫–æ–Ω—Ñ—ñ–≥—É~~

## –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –±–æ—Ä–≥

- [x] ~~–í–∏–¥–∞–ª–∏—Ç–∏ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –º–µ—Ç–æ–¥ `is_recording` –≤ audio.rs~~
- [ ] –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
- [ ] CI/CD pipeline
- [ ] Packaging (Flatpak, AppImage, RPM)
